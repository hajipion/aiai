function FirstView(e){function t(e,t){var o=require("ti.cloud");o.debug=!0,o.Users.create({username:e,password:t,password_confirmation:t},function(o){o.success?(Ti.App.Properties.setString("username",e),Ti.App.Properties.setString("pass",t),alert("user つくった"),n(),require("ui/common/ApplicationTabGroup")):alert("Faild to create user! "+o.message)})}function n(){var t=require("ti.cloud");t.debug=!0,Ti.App._withFriends=[];var n=require("ui/common/ApplicationTabGroup"),o=Ti.App.Properties.getString("username");Ti.App._username=Ti.App.Properties.getString("username");var r=Ti.App.Properties.getString("pass");Ti.App.Properties.setString("username",o),t.Users.login({login:o,password:r},function(o){if(o.success){var r=o.users[0];Ti.App._userid=r.id,alert("Success:\\nid: "+r.id+"\\n"+"first name: "+r.first_name+"\\n"+"last name: "+r.last_name),t.debug=!0,t.Friends.search({user_id:Ti.App._userid},function(t){if(t.success&&t.users.length>0)for(var o=0;t.users.length>o;o++){var r=t.users[o],i=Ti.App._withFriends,s={text:r.username,pt:"50px"};i.push(s),Ti.App._withFriends=i,new n(e).open()}else new n(e).open()})}else alert("ログインできないでーすユーザくつくりまーす！:\\n"+(o.error&&o.message||JSON.stringify(o)))})}var o=Ti.UI.createWindow({backgroundImage:"/images/login-back.png"}),r=Ti.UI.createView({top:120,layout:"vertical",height:"27%",width:"70%"}),i=Ti.UI.createView({layout:"absolute",width:"100%",height:"25%"});if("android"==Ti.Platform.name)var s=Ti.UI.createImageView({image:"/images/login-name.png",height:"100%",left:0});else var s=Ti.UI.createImageView({image:"/images/login-name.png",height:"100%",left:-25});var a=Ti.UI.createTextField({right:0,height:"100%",width:"80%",borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED,hintText:"Name"});i.add(s),i.add(a);var c=Ti.UI.createView({layout:"absolute",width:"100%",height:"25%",top:10});if("android"==Ti.Platform.name)var u=Ti.UI.createImageView({image:"/images/login-name.png",height:"100%",left:0});else var u=Ti.UI.createImageView({image:"/images/login-pass.png",height:"100%",left:-25});var l=Ti.UI.createTextField({right:0,height:"100%",width:"80%",borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED,passwordMask:!0,hintText:"Password"});c.add(u),c.add(l),r.add(i),r.add(c);var d=Ti.UI.createButton({color:"#fff",top:20,height:"25%",width:"100%",title:"ユーザー作成",backgroundImage:"/images/back-login-button.png"});return r.add(d),d.title="新規登録",d.addEventListener("click",function(){var e,n;e=a.value,n=l.value,e&&n?t(e,n):alert("入力してよ！")}),o.add(r),o}module.exports=FirstView;