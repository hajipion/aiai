function Window2(e){var t=Ti.UI.createWindow({title:e}),n=Ti.UI.createView({}),o=Ti.UI.createView({layout:"vertical",top:0,height:"40%",width:"auto",backgroundColor:"#000",opacity:.7}),r=Ti.UI.createTextField({color:"#333",hintText:"現在地",width:"60%",height:"20%",top:10,editable:!1,borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED}),i=Ti.UI.createTextField({color:"#333",hintText:"目的地を入力",width:"60%",height:"20%",top:10,borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED}),s=Ti.UI.createButton({width:45,height:45,backgroundImage:"/images/help.png",opacity:1});"android"==Ti.Platform.name&&(r.height="25%",i.height="25%",s.width=65,s.height=65);var a,c;s.addEventListener("click",function(){var e=require("ti.cloud");if(e.debug=!0,e.PushNotifications.notify({channel:"alert",payload:"HELP!!"+Ti.App._username},function(){}),""===i.getValue())m.setTitle("HELPする前に！"),m.setMessage("目的地を入力してください。"),m.show();else{var t="&appid=dj0zaiZpPWNNNDZuandRTDB0QiZzPWNvbnN1bWVyc2VjcmV0Jng9MjU-",n="lon="+c,o="&lat="+a,r=Ti.Network.createHTTPClient();r.timeout=1e5,r.open("GET","http://reverse.search.olp.yahooapis.jp/OpenLocalPlatform/V1/reverseGeoCoder?"+n+o+t),r.onload=function(){var e=this.responseXML.documentElement,t=e.getElementsByTagName("Address");m.setTitle("HELPする前に！"),m.setMessage("address: "+t.item(0).textContent),m.show()},r.send()}});var u=Ti.UI.createButton({width:30,height:30,right:10,backgroundImage:"/images/close.png",opacity:1});u.addEventListener("click",function(){o.visible=!1,d.visible=!0});var l=Ti.UI.createView({top:10,height:"30%",width:"100%"});l.add(s),l.add(u),o.add(r),o.add(i),o.add(l);var d=Ti.UI.createButton({visible:!1,top:0,width:"15%",right:10,backgroundImage:"/images/arrow-under.png",opacity:1});d.addEventListener("click",function(){d.visible=!1,o.visible=!0});var p,f,h={currentPos:{latitude:"ここに現在地の緯度",longitude:"ここに現在地の経度"},user_id:Ti.App._userid,helped:!1},m=Ti.UI.createAlertDialog({buttonNames:["OK","Cancel"],cancel:1});m.addEventListener("click",function(e){e.cancel,0==e.index&&(p=require("ui/common/socketio-titanium"),f=p.connect("202.181.102.188:8080"),f.emit("message",JSON.stringify(h)),f.on("message",function(e){alert(e);var t=JSON.parse(e),n=Ti.Map.createAnnotation({pinImage:"/images/blue-circle.png",latitude:t.currentPos.latitude,longitude:t.currentPos.longitude,animate:!0});g.addAnnotation(n)}))});var g=Ti.Map.createView({mapType:Ti.Map.STANDARD_TYPE,region:{latitude:35.681382,longitude:139.76608,latitudeDelta:.01,longitudeDelta:.01},animate:!0,regionFit:!0,width:"auto",height:"auto"});if(n.add(g),n.add(o),n.add(d),t.add(n),!Ti.Geolocation.locationServicesEnabled)return Ti.UI.createAlertDialog({title:"位置情報取得",message:"位置測定が出来ません。電波状況、設定を確認してください。"}),void 0;if(Ti.Geolocation.purpose="Get Current Location",Ti.Geolocation.accuracy=Ti.Geolocation.ACCURACY_BEST,Ti.Geolocation.distanceFilter=5,Ti.Geolocation.preferredProvider=Ti.Geolocation.PROVIDER_GPS,"android"==Ti.Platform.name){var y=Ti.Geolocation.Android.createLocationProvider({name:Ti.Geolocation.PROVIDER_GPS,minUpdateDistance:1,minUpdateTime:0});Ti.Geolocation.Android.addLocationProvider(y),Ti.Geolocation.Android.manualMode=!0}var v=Ti.Map.createAnnotation({pinImage:"/images/red-circle.png",animate:!0}),b=function(e){e.success&&!e.error&&(a=e.coords.latitude,c=e.coords.longitude,h.currentPos.latitude=a,h.currentPos.longitude=c,Math.round(100*a)/100,Math.round(100*c)/100,r.setValue(""+a),i.setValue(""+c),v.latitude=a,v.longitude=c,g.addAnnotation(v),g.show(),g.setLocation({latitude:a,longitude:c,animate:!0,latitudeDelta:.01,longitudeDelta:.01}))};return Ti.Geolocation.addEventListener("location",b),t}module.exports=Window2;