var platform={isAndroid:/android/i.test(Ti.Platform.osname),isIPhone:/iphone|ipad/i.test(Ti.Platform.osname),os:function(e){return platform.isIPhone?e.iphone():platform.isAndroid?e.android():e.otherwise()}},global=this,io=this.io=global.io={};io.version="0.8.7",io.protocol=1,io.transports=[],io.j=[],io.sockets={},platform.os({iphone:function(){require("socket.io/lib/util"),require("socket.io/lib/json"),require("socket.io/lib/parser"),require("socket.io/lib/events"),require("socket.io/lib/namespace"),require("socket.io/lib/transport"),require("socket.io/lib/transports/websocket"),require("socket.io/lib/transports/xhr"),require("socket.io/lib/transports/xhr-polling"),require("socket.io/lib/socket")},android:function(){Ti.include("/socket.io/lib/util.js","/socket.io/lib/json.js","/socket.io/lib/parser.js","/socket.io/lib/events.js","/socket.io/lib/namespace.js","/socket.io/lib/transport.js","/socket.io/lib/transports/xhr.js","/socket.io/lib/transports/websocket.js","/socket.io/lib/transports/xhr-polling.js","/socket.io/lib/socket.js")}});var WebSocket=require("ti-websocket-client/ti-websocket-client").WebSocket;io.titanium={FRAGMENT_SIZE:65536},io.Transport.websocket.prototype.open=function(){var e,t=io.util.query(this.socket.options.query),n=this,e=WebSocket;return this.websocket=new e(this.prepareUrl()+t),this.websocket._fragmentSize=io.titanium.FRAGMENT_SIZE,this.websocket.onopen=function(){n.onOpen(),n.socket.setBuffer(!1)},this.websocket.onmessage=function(e){n.onData(e.data)},this.websocket.onclose=function(){n.onClose(),n.socket.setBuffer(!0)},this.websocket.onerror=function(e){n.onError(e)},this},io.Socket.prototype.isXDomain=function(){return!1},io.util.request=function(){return Ti.Network.createHTTPClient()},io.connect=function(e,t){var n,o,r=io.util.parseUri(e);global&&global.location&&(r.protocol=r.protocol||global.location.protocol.slice(0,-1),r.host=r.host||(global.document?global.document.domain:global.location.hostname),r.port=r.port||global.location.port),n=io.util.uniqueUri(r);var i={host:r.host,secure:"https"==r.protocol,port:r.port||("https"==r.protocol?443:80),query:r.query||""};return io.util.merge(i,t),(i["force new connection"]||!io.sockets[n])&&(o=new io.Socket(i)),!i["force new connection"]&&o&&(io.sockets[n]=o),o=o||io.sockets[n],o.of(r.path.length>1?r.path:"")},exports.io=io,exports.connect=function(){return io.connect.apply(io,arguments)};