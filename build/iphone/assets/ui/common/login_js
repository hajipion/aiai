function FirstView(e){var i=Ti.UI.createWindow({backgroundImage:"/images/login-back.png"}),a=Ti.UI.createView({top:120,layout:"vertical",height:"27%",width:"70%"}),t=Ti.UI.createView({layout:"absolute",width:"100%",height:"25%"}),r=Ti.UI.createImageView({image:"/images/login-name.png",height:"100%",left:-25}),o=Ti.UI.createTextField({right:0,height:"100%",width:"80%",borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED,hintText:"Name"});t.add(r),t.add(o);var n=Ti.UI.createView({layout:"absolute",width:"100%",height:"25%",top:10}),s=Ti.UI.createImageView({image:"/images/login-pass.png",height:"100%",left:-25}),d=Ti.UI.createTextField({right:0,height:"100%",width:"80%",borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED,passwordMask:!0,hintText:"Password"});n.add(s),n.add(d),a.add(t),a.add(n);var l=Ti.UI.createButton({color:"#fff",top:20,height:"25%",width:"100%",title:"ユーザー作成",backgroundImage:"/images/back-login-button.png"});a.add(l);var u=require("ti.cloud");u.debug=!0;var c,p;return Ti.App._withFriends=[],l.title="ログイン",l.addEventListener("click",function(){var i=require("ui/common/ApplicationTabGroup");c=o.value,Ti.App._username=c,p=d.value,u.Users.login({login:c,password:p},function(a){if(a.success){var t=a.users[0];Ti.App._userid=t.id,alert("Success:\\nid: "+t.id+"\\n"+"first name: "+t.first_name+"\\n"+"last name: "+t.last_name),u.debug=!0,u.Friends.search({user_id:Ti.App._userid},function(a){if(a.success&&a.users.length>0)for(var t=0;a.users.length>t;t++){var r=a.users[t],o=Ti.App._withFriends,n={text:r.username,pt:"50px"};o.push(n),Ti.App._withFriends=o,new i(e).open()}else new i(e).open()})}else alert("ログインできないでーすユーザくつくりまーす！:\\n"+(a.error&&a.message||JSON.stringify(a))),u.Users.create({username:c,password:p,password_confirmation:p},function(a){a.success?(Ti.UI.createWindow({backgroundColor:"#ffffff"}),Ti.UI.createLabel({top:10,width:"auto",height:"auto",text:"ユーザーを作成しました。"}),new i(e).open()):alert("Faild to create user! "+a.message)})})}),i.add(a),i}module.exports=FirstView;