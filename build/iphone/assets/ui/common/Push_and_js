var debugMode=!0,loginUser=Ti.App.Properties.getString("username"),password=Ti.App.Properties.getString("pass");Ti.App._withFriends=[],Ti.App._username=loginUser;var ApplicationTabGroup=require("ui/common/ApplicationTabGroup");exports.Push_and=function(){var e,t=require("ti.cloudpush");t.debug=debugMode,t.enabled=!0,t.showTrayNotificationsWhenFocused=!0,t.showTrayNotification=!0,t.showAppOnTrayClick=!0,t.focusAppOnPush=!1;var n=require("ti.cloud");n.debug=debugMode,t.retrieveDeviceToken({success:function(t){Ti.API.info("Device Token: "+t.deviceToken),e=t.deviceToken,o()},error:function(e){Ti.API.info("Failed to register for push! "+e.error)}});var o=function(){Ti.App._withFriends=[],require("ui/common/ApplicationTabGroup");var e=Ti.App.Properties.getString("username");Ti.App._username=e,Ti.App.Properties.getString("pass"),n.Users.login({login:loginUser,password:password},function(e){if(e.success){Ti.API.info("login success");var t=e.users[0];Ti.App._userid=t.id,alert("Success:\\nid: "+t.id+"\\n"+"first name: "+t.first_name+"\\n"+"last name: "+t.last_name),n.debug=!0,n.Friends.search({user_id:Ti.App._userid},function(e){if(e.success&&e.users.length>0)for(var t=0;e.users.length>t;t++){var n=e.users[t];alert("friend!");var o=Ti.App._withFriends,i={text:n.username,pt:"50pt"};o.push(i),Ti.App._withFriends=o,r()}else r()})}else Ti.API.info("Error: "+(e.error&&e.message||JSON.stringify(e)))})},r=function(){n.PushNotifications.subscribe({channel:"alert",device_token:e,type:"android"},function(e){e.success?Ti.API.info("Subscribed for Push Notification!"):Ti.API.info("Error:"+(e.error&&e.message||JSON.stringify(e)))})};t.addEventListener("callback",function(e){var t=JSON.parse(e.payload);Ti.API.info(t.android),i(t.android.title,t.android.alert)});var i=function(e,t){var n=Ti.UI.createAlertDialog();n.setTitle(e),n.setMessage(t),n.show()};t.addEventListener("trayClickLaunchedApp",function(){Ti.API.info("Tray Click Launched App (app was not running)")}),t.addEventListener("trayClickFocusedApp",function(){Ti.API.info("Tray Click Focused App (app was already running)")})};