(function(e,t){var o=e.util={},n=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];o.parseUri=function(e){for(var t=n.exec(e||""),o={},i=14;i--;)o[r[i]]=t[i]||"";return o},o.uniqueUri=function(e){var o=e.protocol,n=e.host,r=e.port;return"document"in t?(n=n||document.domain,r=r||("https"==o&&"https:"!==document.location.protocol?443:document.location.port)):(n=n||"localhost",r||"https"!=o||(r=443)),(o||"http")+"://"+n+":"+(r||80)},o.query=function(e,t){var n=o.chunkQuery(e||""),r=[];o.merge(n,o.chunkQuery(t||""));for(var i in n)n.hasOwnProperty(i)&&r.push(i+"="+n[i]);return r.length?"?"+r.join("&"):""},o.chunkQuery=function(e){for(var t,o={},n=e.split("&"),r=0,i=n.length;i>r;++r)t=n[r].split("="),t[0]&&(o[t[0]]=t[1]);return o};var i=!1;o.load=function(e){return"document"in t&&"complete"===document.readyState||i?e():(o.on(t,"load",e,!1),void 0)},o.on=function(e,t,o,n){e.attachEvent?e.attachEvent("on"+t,o):e.addEventListener&&e.addEventListener(t,o,n)},o.request=function(e){var t=require("xmlhttprequest").XMLHttpRequest;return new t},"undefined"!=typeof window&&o.load(function(){i=!0}),o.defer=function(e){return o.ua.webkit&&"undefined"==typeof importScripts?(o.load(function(){setTimeout(e,100)}),void 0):e()},o.merge=function(e,t,n,r){var i,s=r||[],a=n===void 0?2:n;for(i in t)t.hasOwnProperty(i)&&0>o.indexOf(s,i)&&("object"==typeof e[i]&&a?o.merge(e[i],t[i],a-1,s):(e[i]=t[i],s.push(t[i])));return e},o.mixin=function(e,t){o.merge(e.prototype,t.prototype)},o.inherit=function(e,t){function o(){}o.prototype=t.prototype,e.prototype=new o},o.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},o.intersect=function(e,t){for(var n=[],r=e.length>t.length?e:t,i=e.length>t.length?t:e,s=0,a=i.length;a>s;s++)~o.indexOf(r,i[s])&&n.push(i[s]);return n},o.indexOf=function(e,t,o){for(var n=e.length,o=0>o?0>o+n?0:o+n:o||0;n>o&&e[o]!==t;o++);return o>=n?-1:o},o.toArray=function(e){for(var t=[],o=0,n=e.length;n>o;o++)t.push(e[o]);return t},o.ua={},o.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&function(){try{var e=new XMLHttpRequest}catch(t){return!1}return void 0!=e.withCredentials}(),o.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent)})("undefined"!=typeof io?io:module.exports,this);