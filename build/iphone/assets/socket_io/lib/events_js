(function(e,t){function o(){}e.EventEmitter=o,o.prototype.on=function(e,o){return this.$events||(this.$events={}),this.$events[e]?t.util.isArray(this.$events[e])?this.$events[e].push(o):this.$events[e]=[this.$events[e],o]:this.$events[e]=o,this},o.prototype.addListener=o.prototype.on,o.prototype.once=function(e,t){function o(){n.removeListener(e,o),t.apply(this,arguments)}var n=this;return o.listener=t,this.on(e,o),this},o.prototype.removeListener=function(e,o){if(this.$events&&this.$events[e]){var n=this.$events[e];if(t.util.isArray(n)){for(var r=-1,i=0,s=n.length;s>i;i++)if(n[i]===o||n[i].listener&&n[i].listener===o){r=i;break}if(0>r)return this;n.splice(r,1),n.length||delete this.$events[e]}else(n===o||n.listener&&n.listener===o)&&delete this.$events[e]}return this},o.prototype.removeAllListeners=function(e){return this.$events&&this.$events[e]&&(this.$events[e]=null),this},o.prototype.listeners=function(e){return this.$events||(this.$events={}),this.$events[e]||(this.$events[e]=[]),t.util.isArray(this.$events[e])||(this.$events[e]=[this.$events[e]]),this.$events[e]},o.prototype.emit=function(e){if(!this.$events)return!1;var o=this.$events[e];if(!o)return!1;var n=Array.prototype.slice.call(arguments,1);if("function"==typeof o)o.apply(this,n);else{if(!t.util.isArray(o))return!1;for(var r=o.slice(),i=0,s=r.length;s>i;i++)r[i].apply(this,n)}return!0}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports);