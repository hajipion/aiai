(function(e,t,o){function n(){t.Transport.XHR.apply(this,arguments)}function r(){}e["xhr-polling"]=n,t.util.inherit(n,t.Transport.XHR),t.util.merge(n,t.Transport.XHR),n.prototype.name="xhr-polling",n.prototype.open=function(){var e=this;return t.Transport.XHR.prototype.open.call(e),!1},n.prototype.get=function(){function e(){4==this.readyState&&(this.onreadystatechange=r,200==this.status?(i.onData(this.responseText),i.get()):i.onClose())}function t(){this.onload=r,this.onerror=r,i.onData(this.responseText),i.get()}function n(){i.onClose()}if(this.open){var i=this;this.xhr=this.request(),o.XDomainRequest&&this.xhr instanceof XDomainRequest?(this.xhr.onload=t,this.xhr.onerror=n):this.xhr.onreadystatechange=e,this.xhr.send(null)}},n.prototype.onClose=function(){if(t.Transport.XHR.prototype.onClose.call(this),this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=r;try{this.xhr.abort()}catch(e){}this.xhr=null}},n.prototype.ready=function(e,o){var n=this;t.util.defer(function(){o.call(n)})},t.transports.push("xhr-polling")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);