(function(e,t,o){function n(){t.Transport["xhr-polling"].apply(this,arguments),this.index=t.j.length;var e=this;t.j.push(function(t){e._(t)})}var r=o.document&&"MozAppearance"in o.document.documentElement.style;e["jsonp-polling"]=n,t.util.inherit(n,t.Transport["xhr-polling"]),n.prototype.name="jsonp-polling",n.prototype.post=function(e){function o(){n(),r.socket.setBuffer(!1)}function n(){r.iframe&&r.form.removeChild(r.iframe);try{s=document.createElement('<iframe name="'+r.iframeId+'">')}catch(e){s=document.createElement("iframe"),s.name=r.iframeId}s.id=r.iframeId,r.form.appendChild(s),r.iframe=s}var r=this,i=t.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);if(!this.form){var s,a=document.createElement("form"),c=document.createElement("textarea"),u=this.iframeId="socketio_iframe_"+this.index;a.className="socketio",a.style.position="absolute",a.style.top="-1000px",a.style.left="-1000px",a.target=u,a.method="POST",a.setAttribute("accept-charset","utf-8"),c.name="d",a.appendChild(c),document.body.appendChild(a),this.form=a,this.area=c}this.form.action=this.prepareUrl()+i,n(),this.area.value=t.JSON.stringify(e);try{this.form.submit()}catch(l){}this.iframe.attachEvent?s.onreadystatechange=function(){"complete"==r.iframe.readyState&&o()}:this.iframe.onload=o,this.socket.setBuffer(!0)},n.prototype.get=function(){var e=this,o=document.createElement("script"),n=t.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),o.async=!0,o.src=this.prepareUrl()+n,o.onerror=function(){e.onClose()};var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(o,i),this.script=o,r&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},n.prototype._=function(e){return this.onData(e),this.open&&this.get(),this},n.prototype.ready=function(e,o){var n=this;return r?(t.util.load(function(){o.call(n)}),void 0):o.call(this)},n.check=function(){return"document"in o},n.xdomainCheck=function(){return!0},t.transports.push("jsonp-polling")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);