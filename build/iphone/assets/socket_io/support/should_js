(function(should){function Assertion(e){if(void 0!==e){this.obj=e,this.flags={};for(var t=keys(flags),o=0,n=t.length;n>o;o++)this[t[o]]=new FlaggedAssertion(this,t[o])}}function FlaggedAssertion(e,t){this.parent=e,this.obj=e.obj,this.flag=t,this.flags={},this.flags[t]=!0;for(var o in e.flags)e.flags.hasOwnProperty(o)&&(this.flags[o]=!0);for(var n=flags[t],o=0,r=n.length;r>o;o++)this[n[o]]=new FlaggedAssertion(this,n[o])}function every(e,t,o){for(var n=o||window,r=0,i=e.length;i>r;++r)if(!t.call(n,e[r],r,e))return!1;return!0}function indexOf(e,t,o){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t,o);for(var n=e.length,o=0>o?0>o+n?0:o+n:o||0;n>o&&e[o]!==t;o++);return o>=n?-1:o}function i(e,t,o){function n(e){return e}function r(e,o){if(e&&"function"==typeof e.inspect&&e!==exports&&(!e.constructor||e.constructor.prototype!==e))return e.inspect(o);switch(typeof e){case"undefined":return n("undefined","undefined");case"string":var s="'"+json.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return n(s,"string");case"number":return n(""+e,"number");case"boolean":return n(""+e,"boolean")}if(null===e)return n("null","null");var a=keys(e),c=t?Object.getOwnPropertyNames(e):a;if("function"==typeof e&&0===c.length){if(isRegExp(e))return n(""+e,"regexp");var u=e.name?": "+e.name:"";return n("[Function"+u+"]","special")}if(isDate(e)&&0===c.length)return n(e.toUTCString(),"date");var l,p,h;if(isArray(e)?(p="Array",h=["[","]"]):(p="Object",h=["{","}"]),"function"==typeof e){var f=e.name?": "+e.name:"";l=isRegExp(e)?" "+e:" [Function"+f+"]"}else l="";if(isDate(e)&&(l=" "+e.toUTCString()),0===c.length)return h[0]+l+h[1];if(0>o)return isRegExp(e)?n(""+e,"regexp"):n("[Object]","special");i.push(e);var d=map(c,function(t){var s,c;if(e.__lookupGetter__&&(e.__lookupGetter__(t)?c=e.__lookupSetter__(t)?n("[Getter/Setter]","special"):n("[Getter]","special"):e.__lookupSetter__(t)&&(c=n("[Setter]","special"))),0>indexOf(a,t)&&(s="["+t+"]"),c||(0>indexOf(i,e[t])?(c=null===o?r(e[t]):r(e[t],o-1),c.indexOf("\n")>-1&&(c=isArray(e)?map(c.split("\n"),function(e){return"  "+e}).join("\n").substr(2):"\n"+map(c.split("\n"),function(e){return"   "+e}).join("\n"))):c=n("[Circular]","special")),s===void 0){if("Array"===p&&t.match(/^\d+$/))return c;s=json.stringify(""+t),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=n(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=n(s,"string"))}return s+": "+c});i.pop();var m=0,S=reduce(d,function(e,t){return m++,indexOf(t,"\n")>=0&&m++,e+t.length+1},0);return d=S>50?h[0]+(""===l?"":l+"\n ")+" "+d.join(",\n  ")+" "+h[1]:h[0]+l+" "+d.join(", ")+" "+h[1]}var i=[];return r(e,o===void 0?2:o)}function isArray(e){return e instanceof Array||"[object Array]"==Object.prototype.toString.call(e)}function isRegExp(e){var t=""+e;return e instanceof RegExp||"function"==typeof e&&"RegExp"===e.constructor.name&&e.compile&&e.test&&e.exec&&t.match(/^\/.*\/[gim]{0,3}$/)}function isDate(e){return e instanceof Date?!0:!1}function keys(e){if(Object.keys)return Object.keys(e);var t=[];for(var o in e)e.hasOwnProperty(o)&&t.push(o);return t}function map(e,t,o){if(Array.prototype.map)return Array.prototype.map.call(e,t,o);for(var n=Array(e.length),r=0,i=e.length;i>r;r++)r in e&&(n[r]=t.call(o,e[r],r,e));return n}function reduce(e,t){if(Array.prototype.reduce)return Array.prototype.reduce.apply(e,Array.prototype.slice.call(arguments,1));var o=+this.length;if("function"!=typeof t)throw new TypeError;if(0===o&&1===arguments.length)throw new TypeError;var n=0;if(arguments.length>=2)var r=arguments[1];else for(;;){if(n in this){r=this[n++];break}if(++n>=o)throw new TypeError}for(;o>n;n++)n in this&&(r=t.call(null,r,this[n],n,this));return r}function isUndefinedOrNull(e){return null===e||void 0===e}function isArguments(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function objEquiv(e,t){if(isUndefinedOrNull(e)||isUndefinedOrNull(t))return!1;if(e.prototype!==t.prototype)return!1;if(isArguments(e))return isArguments(t)?(e=pSlice.call(e),t=pSlice.call(t),should.eql(e,t)):!1;try{var o,n,r=keys(e),i=keys(t)}catch(s){return!1}if(r.length!=i.length)return!1;for(r.sort(),i.sort(),n=r.length-1;n>=0;n--)if(r[n]!=i[n])return!1;for(n=r.length-1;n>=0;n--)if(o=r[n],!should.eql(e[o],t[o]))return!1;return!0}"undefined"!=typeof exports&&(module.exports=exports=should=require("assert")),should.Assertion=Assertion;var flags={not:["be","have","include"],an:["instance"],and:["be","have","include","an"],be:["an"],have:["an","own"],include:["an"],not:["include","have","be"],own:[],instance:[]};"object"==typeof process?Object.defineProperty(Object.prototype,"should",{get:function(){var e=this.valueOf(),t=function(){return new Assertion(e)};return"undefined"!=typeof exports&&(t.__proto__=exports,t.exports=exports),t},enumerable:!1}):Object.prototype.should=function(){return new Assertion(this.valueOf())},Assertion.prototype.assert=function(e,t,o){var t=this.flags.not?o:t,n=this.flags.not?!e:e;if(!n)throw Error(t);this.flags={}},Assertion.prototype.be_true=function(){return this.assert(this.obj===!0,"expected "+i(this.obj)+" to be true","expected "+i(this.obj)+" to not be true"),this},Assertion.prototype.be_false=function(){return this.assert(this.obj===!1,"expected "+i(this.obj)+" to be false","expected "+i(this.obj)+" to not be false"),this},Assertion.prototype.ok=function(){this.assert(1==this.obj,"expected "+i(this.obj)+" to be true","expected "+i(this.obj)+" to not be true")},Assertion.prototype.empty=function(){return this.obj.should().have.property("length"),this.assert(0===this.obj.length,"expected "+i(this.obj)+" to be empty","expected "+i(this.obj)+" to not be empty"),this},Assertion.prototype.arguments=function(){return this.assert("[object Arguments]"==Object.prototype.toString.call(this.obj),"expected "+i(this.obj)+" to be arguments","expected "+i(this.obj)+" to not be arguments"),this},Assertion.prototype.equal=function(e){return this.assert(e===this.obj,"expected "+i(this.obj)+" to equal "+i(e),"expected "+i(this.obj)+" to not equal "+i(e)),this},Assertion.prototype.eql=function(e){return this.assert(should.eql(e,this.obj),"expected "+i(this.obj)+" to sort of equal "+i(e),"expected "+i(this.obj)+" to sort of not equal "+i(e)),this},Assertion.prototype.within=function(e,t){var o=e+".."+t;return this.assert(this.obj>=e&&t>=this.obj,"expected "+i(this.obj)+" to be within "+o,"expected "+i(this.obj)+" to not be within "+o),this},Assertion.prototype.a=function(e){return this.assert(e==typeof this.obj,"expected "+i(this.obj)+" to be a "+e,"expected "+i(this.obj)+" not to be a "+e),this},Assertion.prototype.of=function(e){var t=e.name;return this.assert(this.obj instanceof e,"expected "+i(this.obj)+" to be an instance of "+t,"expected "+i(this.obj)+" not to be an instance of "+t),this},Assertion.prototype.greaterThan=Assertion.prototype.above=function(e){return this.assert(this.obj>e,"expected "+i(this.obj)+" to be above "+e,"expected "+i(this.obj)+" to be below "+e),this},Assertion.prototype.lessThan=Assertion.prototype.below=function(e){return this.assert(e>this.obj,"expected "+i(this.obj)+" to be below "+e,"expected "+i(this.obj)+" to be above "+e),this},Assertion.prototype.match=function(e){return this.assert(e.exec(this.obj),"expected "+i(this.obj)+" to match "+e,"expected "+i(this.obj)+" not to match "+e),this},Assertion.prototype.length=function(e){this.obj.should().have.property("length");var t=this.obj.length;return this.assert(e==t,"expected "+i(this.obj)+" to have a length of "+e+" but got "+t,"expected "+i(this.obj)+" to not have a length of "+t),this},Assertion.prototype.string=function(e){return this.obj.should().be.a("string"),this.assert(~this.obj.indexOf(e),"expected "+i(this.obj)+" to include "+i(e),"expected "+i(this.obj)+" to not include "+i(e)),this},Assertion.prototype.object=function(e){this.obj.should().be.a("object");var t=!0;for(var o in e)if(e.hasOwnProperty(o)&&!should.eql(e[o],this.obj[o])){t=!1;break}return this.assert(t,"expected "+i(this.obj)+" to include "+i(e),"expected "+i(this.obj)+" to not include "+i(e)),this},Assertion.prototype.property=function(e,t){if(this.flags.own)return this.assert(this.obj.hasOwnProperty(e),"expected "+i(this.obj)+" to have own property "+i(e),"expected "+i(this.obj)+" to not have own property "+i(e)),this;if(this.flags.not&&void 0!==t){if(void 0===this.obj[e])throw Error(i(this.obj)+" has no property "+i(e))}else this.assert(void 0!==this.obj[e],"expected "+i(this.obj)+" to have a property "+i(e),"expected "+i(this.obj)+" to not have a property "+i(e));return void 0!==t&&this.assert(t===this.obj[e],"expected "+i(this.obj)+" to have a property "+i(e)+" of "+i(t)+", but got "+i(this.obj[e]),"expected "+i(this.obj)+" to not have a property "+i(e)+" of "+i(t)),this.obj=this.obj[e],this},Assertion.prototype.contain=function(e){return this.obj.should().be.an.instance.of(Array),this.assert(~indexOf(this.obj,e),"expected "+i(this.obj)+" to contain "+i(e),"expected "+i(this.obj)+" to not contain "+i(e)),this},Assertion.prototype.key=Assertion.prototype.keys=function(e){var t,o=!0;if(e=e instanceof Array?e:Array.prototype.slice.call(arguments),!e.length)throw Error("keys required");var n=e(this.obj),r=e.length;if(o=every(e,function(e){return~indexOf(n,e)}),this.flags.not||this.flags.include||(o=o&&e.length==n.length),r>1){e=map(e,function(e){return i(e)});var s=e.pop();t=e.join(", ")+", and "+s}else t=i(e[0]);return t=(r>1?"keys ":"key ")+t,t=(this.flag.include?"include ":"have ")+t,this.assert(o,"expected "+i(this.obj)+" to "+t,"expected "+i(this.obj)+" to not "+t),this},FlaggedAssertion.prototype=new Assertion,should.equal=function(e,t){e!==t&&should.fail("expected "+i(e)+" to equal "+i(t))},should.fail=function(e){throw Error(e)},should.eql=function eql(e,t){if(e===t)return!0;if("undefined"!=typeof Buffer&&Buffer.isBuffer(e)&&Buffer.isBuffer(t)){if(e.length!=t.length)return!1;for(var o=0;e.length>o;o++)if(e[o]!==t[o])return!1;return!0}return e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():"object"!=typeof e&&"object"!=typeof t?e==t:objEquiv(e,t)};var json=function(){"use strict";function f(e){return 10>e?"0"+e:e}function date(e){return isFinite(e.valueOf())?e.getUTCFullYear()+"-"+f(e.getUTCMonth()+1)+"-"+f(e.getUTCDate())+"T"+f(e.getUTCHours())+":"+f(e.getUTCMinutes())+":"+f(e.getUTCSeconds())+"Z":null}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var o,n,r,i,s,a=gap,c=t[e];switch(c instanceof Date&&(c=date(e)),"function"==typeof rep&&(c=rep.call(t,e,c)),typeof c){case"string":return quote(c);case"number":return isFinite(c)?c+"":"null";case"boolean":case"null":return c+"";case"object":if(!c)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(c)){for(i=c.length,o=0;i>o;o+=1)s[o]=str(o,c)||"null";return r=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+a+"]":"["+s.join(",")+"]",gap=a,r}if(rep&&"object"==typeof rep)for(i=rep.length,o=0;i>o;o+=1)"string"==typeof rep[o]&&(n=rep[o],r=str(n,c),r&&s.push(quote(n)+(gap?": ":":")+r));else for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(r=str(n,c),r&&s.push(quote(n)+(gap?": ":":")+r));return r=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+a+"}":"{"+s.join(",")+"}",gap=a,r}}if("object"==typeof JSON&&JSON.parse&&JSON.stringify)return{parse:nativeJSON.parse,stringify:nativeJSON.stringify};var JSON={},cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;return JSON.stringify=function(e,t,o){var n;if(gap="",indent="","number"==typeof o)for(n=0;o>n;n+=1)indent+=" ";else"string"==typeof o&&(indent=o);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw Error("JSON.stringify");return str("",{"":e})},JSON.parse=function(text,reviver){function walk(e,t){var o,n,r=e[t];if(r&&"object"==typeof r)for(o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n=walk(r,o),void 0!==n?r[o]=n:delete r[o]);return reviver.call(e,t,r)}var j;if(text+="",cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")},JSON}()})("undefined"!=typeof exports?exports:should={});