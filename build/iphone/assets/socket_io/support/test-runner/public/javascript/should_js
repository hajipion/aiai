(function(should){function Assertion(e){if(void 0!==e){this.obj=e,this.flags={};for(var t=keys(flags),n=0,o=t.length;o>n;n++)this[t[n]]=new FlaggedAssertion(this,t[n])}}function FlaggedAssertion(e,t){this.parent=e,this.obj=e.obj,this.flag=t,this.flags={},this.flags[t]=!0;for(var n in e.flags)e.flags.hasOwnProperty(n)&&(this.flags[n]=!0);for(var o=flags[t],n=0,r=o.length;r>n;n++)this[o[n]]=new FlaggedAssertion(this,o[n])}function every(e,t,n){for(var o=n||window,r=0,i=e.length;i>r;++r)if(!t.call(o,e[r],r,e))return!1;return!0}function indexOf(e,t,n){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t,n);for(var o=e.length,n=0>n?0>n+o?0:n+o:n||0;o>n&&e[n]!==t;n++);return n>=o?-1:n}function i(e,t,n){function o(e){return e}function r(e,n){if(e&&"function"==typeof e.inspect&&e!==exports&&(!e.constructor||e.constructor.prototype!==e))return e.inspect(n);switch(typeof e){case"undefined":return o("undefined","undefined");case"string":var s="'"+json.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return o(s,"string");case"number":return o(""+e,"number");case"boolean":return o(""+e,"boolean")}if(null===e)return o("null","null");var a=keys(e),c=t?Object.getOwnPropertyNames(e):a;if("function"==typeof e&&0===c.length){if(isRegExp(e))return o(""+e,"regexp");var u=e.name?": "+e.name:"";return o("[Function"+u+"]","special")}if(isDate(e)&&0===c.length)return o(e.toUTCString(),"date");var l,p,f;if(isArray(e)?(p="Array",f=["[","]"]):(p="Object",f=["{","}"]),"function"==typeof e){var d=e.name?": "+e.name:"";l=isRegExp(e)?" "+e:" [Function"+d+"]"}else l="";if(isDate(e)&&(l=" "+e.toUTCString()),0===c.length)return f[0]+l+f[1];if(0>n)return isRegExp(e)?o(""+e,"regexp"):o("[Object]","special");i.push(e);var h=map(c,function(t){var s,c;if(e.__lookupGetter__&&(e.__lookupGetter__(t)?c=e.__lookupSetter__(t)?o("[Getter/Setter]","special"):o("[Getter]","special"):e.__lookupSetter__(t)&&(c=o("[Setter]","special"))),0>indexOf(a,t)&&(s="["+t+"]"),c||(0>indexOf(i,e[t])?(c=null===n?r(e[t]):r(e[t],n-1),c.indexOf("\n")>-1&&(c=isArray(e)?map(c.split("\n"),function(e){return"  "+e}).join("\n").substr(2):"\n"+map(c.split("\n"),function(e){return"   "+e}).join("\n"))):c=o("[Circular]","special")),s===void 0){if("Array"===p&&t.match(/^\d+$/))return c;s=json.stringify(""+t),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=o(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=o(s,"string"))}return s+": "+c});i.pop();var m=0,y=reduce(h,function(e,t){return m++,indexOf(t,"\n")>=0&&m++,e+t.length+1},0);return h=y>50?f[0]+(""===l?"":l+"\n ")+" "+h.join(",\n  ")+" "+f[1]:f[0]+l+" "+h.join(", ")+" "+f[1]}var i=[];return r(e,n===void 0?2:n)}function isArray(e){return e instanceof Array||"[object Array]"==Object.prototype.toString.call(e)}function isRegExp(e){var t=""+e;return e instanceof RegExp||"function"==typeof e&&"RegExp"===e.constructor.name&&e.compile&&e.test&&e.exec&&t.match(/^\/.*\/[gim]{0,3}$/)}function isDate(e){return e instanceof Date?!0:!1}function keys(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}function map(e,t,n){if(Array.prototype.map)return Array.prototype.map.call(e,t,n);for(var o=Array(e.length),r=0,i=e.length;i>r;r++)r in e&&(o[r]=t.call(n,e[r],r,e));return o}function reduce(e,t){if(Array.prototype.reduce)return Array.prototype.reduce.apply(e,Array.prototype.slice.call(arguments,1));var n=+this.length;if("function"!=typeof t)throw new TypeError;if(0===n&&1===arguments.length)throw new TypeError;var o=0;if(arguments.length>=2)var r=arguments[1];else for(;;){if(o in this){r=this[o++];break}if(++o>=n)throw new TypeError}for(;n>o;o++)o in this&&(r=t.call(null,r,this[o],o,this));return r}function isUndefinedOrNull(e){return null===e||void 0===e}function isArguments(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function objEquiv(e,t){if(isUndefinedOrNull(e)||isUndefinedOrNull(t))return!1;if(e.prototype!==t.prototype)return!1;if(isArguments(e))return isArguments(t)?(e=pSlice.call(e),t=pSlice.call(t),should.eql(e,t)):!1;try{var n,o,r=keys(e),i=keys(t)}catch(s){return!1}if(r.length!=i.length)return!1;for(r.sort(),i.sort(),o=r.length-1;o>=0;o--)if(r[o]!=i[o])return!1;for(o=r.length-1;o>=0;o--)if(n=r[o],!should.eql(e[n],t[n]))return!1;return!0}"undefined"!=typeof exports&&(module.exports=exports=should=require("assert")),should.Assertion=Assertion;var flags={not:["be","have","include"],an:["instance"],and:["be","have","include","an"],be:["an"],have:["an","own"],include:["an"],not:["include","have","be"],own:[],instance:[]};"object"==typeof process?Object.defineProperty(Object.prototype,"should",{get:function(){var e=this.valueOf(),t=function(){return new Assertion(e)};return"undefined"!=typeof exports&&(t.__proto__=exports,t.exports=exports),t},enumerable:!1}):Object.prototype.should=function(){return new Assertion(this.valueOf())},Assertion.prototype.assert=function(e,t,n){var t=this.flags.not?n:t,o=this.flags.not?!e:e;if(!o)throw Error(t);this.flags={}},Assertion.prototype.be_true=function(){return this.assert(this.obj===!0,"expected "+i(this.obj)+" to be true","expected "+i(this.obj)+" to not be true"),this},Assertion.prototype.be_false=function(){return this.assert(this.obj===!1,"expected "+i(this.obj)+" to be false","expected "+i(this.obj)+" to not be false"),this},Assertion.prototype.ok=function(){this.assert(1==this.obj,"expected "+i(this.obj)+" to be true","expected "+i(this.obj)+" to not be true")},Assertion.prototype.empty=function(){return this.obj.should().have.property("length"),this.assert(0===this.obj.length,"expected "+i(this.obj)+" to be empty","expected "+i(this.obj)+" to not be empty"),this},Assertion.prototype.arguments=function(){return this.assert("[object Arguments]"==Object.prototype.toString.call(this.obj),"expected "+i(this.obj)+" to be arguments","expected "+i(this.obj)+" to not be arguments"),this},Assertion.prototype.equal=function(e){return this.assert(e===this.obj,"expected "+i(this.obj)+" to equal "+i(e),"expected "+i(this.obj)+" to not equal "+i(e)),this},Assertion.prototype.eql=function(e){return this.assert(should.eql(e,this.obj),"expected "+i(this.obj)+" to sort of equal "+i(e),"expected "+i(this.obj)+" to sort of not equal "+i(e)),this},Assertion.prototype.within=function(e,t){var n=e+".."+t;return this.assert(this.obj>=e&&t>=this.obj,"expected "+i(this.obj)+" to be within "+n,"expected "+i(this.obj)+" to not be within "+n),this},Assertion.prototype.a=function(e){return this.assert(e==typeof this.obj,"expected "+i(this.obj)+" to be a "+e,"expected "+i(this.obj)+" not to be a "+e),this},Assertion.prototype.of=function(e){var t=e.name;return this.assert(this.obj instanceof e,"expected "+i(this.obj)+" to be an instance of "+t,"expected "+i(this.obj)+" not to be an instance of "+t),this},Assertion.prototype.greaterThan=Assertion.prototype.above=function(e){return this.assert(this.obj>e,"expected "+i(this.obj)+" to be above "+e,"expected "+i(this.obj)+" to be below "+e),this},Assertion.prototype.lessThan=Assertion.prototype.below=function(e){return this.assert(e>this.obj,"expected "+i(this.obj)+" to be below "+e,"expected "+i(this.obj)+" to be above "+e),this},Assertion.prototype.match=function(e){return this.assert(e.exec(this.obj),"expected "+i(this.obj)+" to match "+e,"expected "+i(this.obj)+" not to match "+e),this},Assertion.prototype.length=function(e){this.obj.should().have.property("length");var t=this.obj.length;return this.assert(e==t,"expected "+i(this.obj)+" to have a length of "+e+" but got "+t,"expected "+i(this.obj)+" to not have a length of "+t),this},Assertion.prototype.string=function(e){return this.obj.should().be.a("string"),this.assert(~this.obj.indexOf(e),"expected "+i(this.obj)+" to include "+i(e),"expected "+i(this.obj)+" to not include "+i(e)),this},Assertion.prototype.object=function(e){this.obj.should().be.a("object");var t=!0;for(var n in e)if(e.hasOwnProperty(n)&&!should.eql(e[n],this.obj[n])){t=!1;break}return this.assert(t,"expected "+i(this.obj)+" to include "+i(e),"expected "+i(this.obj)+" to not include "+i(e)),this},Assertion.prototype.property=function(e,t){if(this.flags.own)return this.assert(this.obj.hasOwnProperty(e),"expected "+i(this.obj)+" to have own property "+i(e),"expected "+i(this.obj)+" to not have own property "+i(e)),this;if(this.flags.not&&void 0!==t){if(void 0===this.obj[e])throw Error(i(this.obj)+" has no property "+i(e))}else this.assert(void 0!==this.obj[e],"expected "+i(this.obj)+" to have a property "+i(e),"expected "+i(this.obj)+" to not have a property "+i(e));return void 0!==t&&this.assert(t===this.obj[e],"expected "+i(this.obj)+" to have a property "+i(e)+" of "+i(t)+", but got "+i(this.obj[e]),"expected "+i(this.obj)+" to not have a property "+i(e)+" of "+i(t)),this.obj=this.obj[e],this},Assertion.prototype.contain=function(e){return this.obj.should().be.an.instance.of(Array),this.assert(~indexOf(this.obj,e),"expected "+i(this.obj)+" to contain "+i(e),"expected "+i(this.obj)+" to not contain "+i(e)),this},Assertion.prototype.key=Assertion.prototype.keys=function(e){var t,n=!0;if(e=e instanceof Array?e:Array.prototype.slice.call(arguments),!e.length)throw Error("keys required");var o=e(this.obj),r=e.length;if(n=every(e,function(e){return~indexOf(o,e)}),this.flags.not||this.flags.include||(n=n&&e.length==o.length),r>1){e=map(e,function(e){return i(e)});var s=e.pop();t=e.join(", ")+", and "+s}else t=i(e[0]);return t=(r>1?"keys ":"key ")+t,t=(this.flag.include?"include ":"have ")+t,this.assert(n,"expected "+i(this.obj)+" to "+t,"expected "+i(this.obj)+" to not "+t),this},FlaggedAssertion.prototype=new Assertion,should.equal=function(e,t){e!==t&&should.fail("expected "+i(e)+" to equal "+i(t))},should.fail=function(e){throw Error(e)},should.eql=function eql(e,t){if(e===t)return!0;if("undefined"!=typeof Buffer&&Buffer.isBuffer(e)&&Buffer.isBuffer(t)){if(e.length!=t.length)return!1;for(var n=0;e.length>n;n++)if(e[n]!==t[n])return!1;return!0}return e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():"object"!=typeof e&&"object"!=typeof t?e==t:objEquiv(e,t)};var json=function(){"use strict";function f(e){return 10>e?"0"+e:e}function date(e){return isFinite(e.valueOf())?e.getUTCFullYear()+"-"+f(e.getUTCMonth()+1)+"-"+f(e.getUTCDate())+"T"+f(e.getUTCHours())+":"+f(e.getUTCMinutes())+":"+f(e.getUTCSeconds())+"Z":null}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,o,r,i,s,a=gap,c=t[e];switch(c instanceof Date&&(c=date(e)),"function"==typeof rep&&(c=rep.call(t,e,c)),typeof c){case"string":return quote(c);case"number":return isFinite(c)?c+"":"null";case"boolean":case"null":return c+"";case"object":if(!c)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(c)){for(i=c.length,n=0;i>n;n+=1)s[n]=str(n,c)||"null";return r=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+a+"]":"["+s.join(",")+"]",gap=a,r}if(rep&&"object"==typeof rep)for(i=rep.length,n=0;i>n;n+=1)"string"==typeof rep[n]&&(o=rep[n],r=str(o,c),r&&s.push(quote(o)+(gap?": ":":")+r));else for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(r=str(o,c),r&&s.push(quote(o)+(gap?": ":":")+r));return r=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+a+"}":"{"+s.join(",")+"}",gap=a,r}}if("object"==typeof JSON&&JSON.parse&&JSON.stringify)return{parse:nativeJSON.parse,stringify:nativeJSON.stringify};var JSON={},cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;return JSON.stringify=function(e,t,n){var o;if(gap="",indent="","number"==typeof n)for(o=0;n>o;o+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw Error("JSON.stringify");return str("",{"":e})},JSON.parse=function(text,reviver){function walk(e,t){var n,o,r=e[t];if(r&&"object"==typeof r)for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(o=walk(r,n),void 0!==o?r[n]=o:delete r[n]);return reviver.call(e,t,r)}var j;if(text+="",cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")},JSON}()})("undefined"!=typeof exports?exports:should={});