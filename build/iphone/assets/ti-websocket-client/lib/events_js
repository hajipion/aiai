function EventEmitter(){}var isArray=Array.isArray;exports.EventEmitter=EventEmitter;var defaultMaxListeners=10;EventEmitter.prototype.setMaxListeners=function(e){this._events||(this._events={}),this._maxListeners=e},EventEmitter.prototype.emit=function(){var e=arguments[0];if(!this._events)return!1;var t=this._events[e];if(!t)return!1;var n,o,r;if("function"==typeof t){switch(arguments.length){case 1:t.call(this);break;case 2:t.call(this,arguments[1]);break;case 3:t.call(this,arguments[1],arguments[2]);break;default:for(o=arguments.length,n=Array(o-1),r=1;o>r;r++)n[r-1]=arguments[r];t.apply(this,n)}return!0}if(isArray(t)){for(o=arguments.length,n=Array(o-1),r=1;o>r;r++)n[r-1]=arguments[r];var i=t.slice();for(r=0,o=i.length;o>r;r++)i[r].apply(this,n);return!0}return!1},EventEmitter.prototype.addListener=function(e,t){if("function"!=typeof t)throw Error("addListener only takes instances of Function");if(this._events||(this._events={}),this.emit("newListener",e,t),this._events[e])if(isArray(this._events[e])){if(this._events[e].push(t),!this._events[e].warned){var n;n=void 0!==this._maxListeners?this._maxListeners:defaultMaxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),console.trace())}}else this._events[e]=[this._events[e],t];else this._events[e]=t;return this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(e,t){function n(){o.removeListener(e,n),t.apply(this,arguments)}if("function"!=typeof t)throw Error(".once only takes instances of Function");var o=this;return n.listener=t,o.on(e,n),this},EventEmitter.prototype.removeListener=function(e,t){if("function"!=typeof t)throw Error("removeListener only takes instances of Function");if(!this._events||!this._events[e])return this;var n=this._events[e];if(isArray(n)){var o,r=-1;for(o=0,length=n.length;length>o;o++)if(n[o]===t||n[o].listener&&n[o].listener===t){r=o;break}if(0>r)return this;n.splice(r,1),0===n.length&&delete this._events[e]}else(n===t||n.listener&&n.listener===t)&&delete this._events[e];return this},EventEmitter.prototype.removeAllListeners=function(e){return 0===arguments.length?(this._events={},this):(e&&this._events&&this._events[e]&&(this._events[e]=null),this)},EventEmitter.prototype.listeners=function(e){return this._events||(this._events={}),this._events[e]||(this._events[e]=[]),isArray(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]};